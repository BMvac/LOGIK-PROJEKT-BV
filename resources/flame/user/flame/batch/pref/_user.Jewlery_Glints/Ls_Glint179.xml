<ShaderNodePreset LimitInputsToTexture="1" Name="Glint" Description="Glint - make highlights bloom into stars

Demo: http://youtube.com/watch?v=0Xa8L4fkPwU

lewis@lewissaunders.com" SupportsAdaptiveDegradation="0">
   <Shader Index="1" OutputBitDepth="Output">
      <Uniform InputType="Front" Name="front" Type="sampler2D" GL_TEXTURE_MIN_FILTER="GL_LINEAR_MIPMAP_LINEAR" GL_TEXTURE_MAG_FILTER="GL_LINEAR_MIPMAP_LINEAR" GL_TEXTURE_WRAP_S="GL_CLAMP" GL_TEXTURE_WRAP_T="GL_CLAMP" Mipmaps="True" DisplayName="Front" NoInput="Error" Tooltip="" Index="0">
      </Uniform>
      <Uniform InputType="Matte" Name="matte" Type="sampler2D" GL_TEXTURE_MIN_FILTER="GL_LINEAR" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" Mipmaps="False" DisplayName="Matte" NoInput="White" Tooltip="" Index="1">
      </Uniform>
      <Uniform Type="float" DisplayName="Barrel distort" Page="1" Col="0" Row="0" Tooltip="Bend stars around center of frame" Inc="0.01" Default="0.0" Min="-10.0" Max="10.0" ResDependent="None" Name="barrel">
      </Uniform>
      <Uniform Type="float" DisplayName="Aspect" Page="1" Col="0" Row="3" Tooltip="Stretch stars for anamorphic glints" Inc="0.01" Default="1.0" Min="0.01" Max="100.0" ResDependent="None" Name="aspect">
      </Uniform>
      <Uniform Type="float" DisplayName="Dispersion cycles" Page="0" Col="2" Row="1" Tooltip="How many complete rainbows fit along each ray" Inc="0.01" Default="1.0" Min="0.01" Max="30.0" ResDependent="None" Name="dispersioncycles">
      </Uniform>
      <Uniform Type="float" DisplayName="Saturation" Page="0" Col="0" Row="2" Tooltip="How much star colour comes from the underlying image" Inc="0.01" Default="0.7" Min="-10.0" Max="10.0" ResDependent="None" Name="saturation">
      </Uniform>
      <Uniform Type="float" DisplayName="Twirl" Page="1" Col="0" Row="2" Tooltip="Bend the arms of the stars" Inc="1.0" Default="0.0" Min="-1080.0" Max="1080.0" ResDependent="None" Name="twirl">
      </Uniform>
      <Uniform Type="bool" DisplayName="Use noise" Tooltip="" Default="False" Page="1" Col="1" Row="0" Name="dirton">
      </Uniform>
      <Uniform Type="float" DisplayName="Dirt" Page="1" Col="1" Row="1" Tooltip="" Inc="0.005" Default="0.1" Min="0.0" Max="1.0" ResDependent="None" Name="dirt">
      </Uniform>
      <Uniform Type="float" DisplayName="Frequency" Page="1" Col="1" Row="2" Tooltip="" Inc="0.2" Default="5.0" Min="0.0" Max="1000.0" ResDependent="None" Name="dirtfreq">
      </Uniform>
      <Uniform Type="float" DisplayName="Gain" Page="0" Col="0" Row="1" Tooltip="Overall brightness of stars" Inc="0.5" Default="40.0" Min="0.0" Max="2000.0" ResDependent="None" Name="gain">
      </Uniform>
      <Uniform Type="float" DisplayName="AA samples" Page="0" Col="1" Row="4" Tooltip="Increase to avoid stepping artifacts" Inc="0.1" Default="1.4" Min="0.1" Max="16.0" ResDependent="None" Name="aa">
      </Uniform>
      <Uniform Type="float" DisplayName="Falloff" Page="0" Col="1" Row="3" Tooltip="Dissolves away ends of rays" Inc="0.01" Default="1.9" Min="-2.0" Max="4.0" ResDependent="None" Name="falloff">
      </Uniform>
      <Uniform Type="float" DisplayName="Dispersion offset" Page="0" Col="2" Row="2" Tooltip="Hue-clock the dispersion rainbows" Inc="1.00" Default="-45.0" Min="-360.0" Max="360.0" ResDependent="None" Name="dispersionoffset">
      </Uniform>
      <Uniform Type="float" DisplayName="Threshold" Page="0" Col="0" Row="0" Tooltip="Highlights darker than this are ignored" Inc="0.01" Default="0.6" Min="0.0" Max="200.0" ResDependent="None" Name="threshold">
      </Uniform>
      <Uniform Type="float" DisplayName="Threshold clamp" Page="0" Col="0" Row="4" Tooltip="Highlights brighter than this don't increase the glint further, to avoid hot pixels creating huge stars" Inc="0.01" Default="5.0" Min="0.0" Max="200.0" ResDependent="None" Name="thresholdclamp">
      </Uniform>
      <Uniform Type="float" DisplayName="Barrel bend" Page="1" Col="0" Row="1" Tooltip="Bendiness of barrel distortion" Inc="0.01" Default="2.0" Min="1.0" Max="20.0" ResDependent="None" Name="barrelbend">
      </Uniform>
      <Uniform Type="float" DisplayName="Dispersion" Page="0" Col="2" Row="0" Tooltip="How much the stars change colour along their arms" Inc="0.01" Default="0.25" Min="0.0" Max="10.0" ResDependent="None" Name="dispersion">
      </Uniform>
      <Uniform Type="vec3" ValueType="Colour" DisplayName="Tint" Page="0" Col="0" Row="3" Tooltip="Tint the stars towards this colour" Inc="0.01" Name="tint">
         <SubUniform Default="1.0" Min="-10.0" Max="10.0" ResDependent="None">
         </SubUniform>
         <SubUniform Default="1.0" Min="-10.0" Max="10.0" ResDependent="None">
         </SubUniform>
         <SubUniform Default="1.0" Min="-10.0" Max="10.0" ResDependent="None">
         </SubUniform>
      </Uniform>
      <Uniform Type="float" DisplayName="Spin" Page="0" Col="1" Row="2" Tooltip="Rotate the stars" Inc="1.0" Default="48.0" Min="-360.0" Max="360.0" ResDependent="None" Name="spin">
      </Uniform>
      <Uniform Type="float" DisplayName="Size" Page="0" Col="1" Row="0" Tooltip="Size of the stars" Inc="1.0" Default="50.0" Min="0.01" Max="400.0" ResDependent="None" Name="size">
      </Uniform>
      <Uniform Type="float" DisplayName="Rays" Page="0" Col="1" Row="1" Tooltip="How many points each star has" Inc="0.1" Default="6.0" Min="1.0" Max="100.0" ResDependent="None" Name="rays">
      </Uniform>
      <Uniform Type="float" DisplayName="Extra size" Page="1" Col="3" Row="1" Tooltip="Extra multiplier on size if you want extra big glints - it will get slow, be careful!" Inc="0.1" Default="1.0" Min="0.01" Max="20.0" ResDependent="None" Name="extrasize">
      </Uniform>
      <Uniform Type="float" DisplayName="Extra rays" Page="1" Col="3" Row="2" Tooltip="Extra multiplier on ray count if you want many more ray arms - it will get slow, be careful!" Inc="1.0" Default="1.0" Min="0.01" Max="20.0" ResDependent="None" Name="extrarays">
      </Uniform>
      <Uniform Type="bool" DisplayName="Use matte on glint source" Tooltip="Generate glints only from highlights inside the matte; the matte can also be RGB to selectively tint the stars" Default="False" Page="0" Col="3" Row="2" Name="usematte">
      </Uniform>
      <Uniform Type="bool" DisplayName="Use matte to blend (faster)" Tooltip="Only processes pixels inside the matte - this is really fast for small mattes, but glints will be cut off at the matte edge" Default="False" Page="0" Col="3" Row="3" Name="useblendmatte">
      </Uniform>
      <Uniform Default="1" Tooltip="" Row="4" Col="2" Page="0" DisplayName="Resolution" ValueType="Popup" Type="int" Name="downsample">
         <PopupEntry Value="3" Title="Eighth">
         </PopupEntry>
         <PopupEntry Value="2" Title="Quarter">
         </PopupEntry>
         <PopupEntry Value="1" Title="Half">
         </PopupEntry>
         <PopupEntry Value="0" Title="Full">
         </PopupEntry>
      </Uniform>
   </Shader>
   <Shader Index="2" OutputBitDepth="Output">
      <Uniform Name="adsk_results_pass1" Type="sampler2D" GL_TEXTURE_MIN_FILTER="GL_LINEAR" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" Mipmaps="False" InputColor="67, 77, 83">
      </Uniform>
      <Uniform Name="blursize" DisplayName="Blur" ChannelName="Blur" Type="float" Page="1" Col="2" Row="0" Tooltip="" Inc="0.01" Default="0.5" Min="0.0" Max="10000.0" ResDependent="None">
      </Uniform>
      <Uniform Name="blursizer" DisplayName="Blur weight R" ChannelName="BlurR" Type="float" Page="1" Col="2" Row="1" Tooltip="" Inc="0.01" Default="1.0" Min="0.0" Max="10000.0" ResDependent="None">
      </Uniform>
      <Uniform Name="blursizeg" DisplayName="Blur weight G" ChannelName="BlurG" Type="float" Page="1" Col="2" Row="2" Tooltip="" Inc="0.01" Default="1.0" Min="0.0" Max="10000.0" ResDependent="None">
      </Uniform>
      <Uniform Name="blursizeb" DisplayName="Blur weight B" ChannelName="BlurB" Type="float" Page="1" Col="2" Row="3" Tooltip="" Inc="0.01" Default="1.0" Min="0.0" Max="10000.0" ResDependent="None">
      </Uniform>
      <Uniform Type="int" Name="downsample">
         <Duplicate>
         </Duplicate>
      </Uniform>
   </Shader>
   <Shader Index="3" OutputBitDepth="Output">
      <Uniform Name="adsk_results_pass2" Type="sampler2D" GL_TEXTURE_MIN_FILTER="GL_LINEAR" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" Mipmaps="False" InputColor="67, 77, 83">
      </Uniform>
      <Uniform InputType="Front" Name="front" Type="sampler2D" GL_TEXTURE_MIN_FILTER="GL_LINEAR" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" Mipmaps="False" DisplayName="Front" Tooltip="" Index="0">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform InputType="Matte" Name="matte" Type="sampler2D" GL_TEXTURE_MIN_FILTER="GL_LINEAR" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" Mipmaps="False" DisplayName="Matte" Tooltip="" Index="1">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Name="blursize" Type="float">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Name="blursizer" Type="float">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Name="blursizeg" Type="float">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Name="blursizeb" Type="float">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Type="bool" DisplayName="Screen highlights" Tooltip="Screens the glints over the image instead of simply adding them" Default="True" Page="0" Col="3" Row="0" Name="screen">
      </Uniform>
      <Uniform Type="bool" Name="usematte">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Type="bool" Name="useblendmatte">
         <Duplicate>
         </Duplicate>
      </Uniform>
      <Uniform Type="bool" DisplayName="Output glints only" Tooltip="Output just the glints on black" Default="False" Page="0" Col="3" Row="4" Name="outputglints">
      </Uniform>
   </Shader>
   <Page Page="0" Name="Stars">
      <Col Page="0" Col="0" Name="Colour">
      </Col>
      <Col Page="0" Col="1" Name="Shape">
      </Col>
      <Col Page="0" Col="2" Name="Dispersion">
      </Col>
      <Col Page="0" Col="3" Name="Blend">
      </Col>
   </Page>
   <Page Page="1" Name="Distort + Blur">
      <Col Page="1" Col="0" Name="Geometry">
      </Col>
      <Col Page="1" Col="1" Name="Noise">
      </Col>
      <Col Page="1" Col="2" Name="Blur glints">
      </Col>
      <Col Page="1" Col="3" Name="Slow options">
      </Col>
   </Page>
</ShaderNodePreset>

